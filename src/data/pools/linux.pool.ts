import type { Task } from "../task-types";

export const LINUX_TASKS: Task[] = [
  // =========================================================
  // ROOT
  // =========================================================
  {
    id: "root_linux_learning_path",
    type: "root",
    title: "Linux Learning Path (Root)",
    description:
      "從零開始系統學 Linux：命令行 → 文件系統 → 權限 → 包管理 → 進程 → 網路 → shell → systemd → 安全 → 實戰。",
    energy: "medium",
    duration: { min: 10, max: 20 },
    tags: ["linux", "root", "learning", "path"],
  },

  // =========================================================
  // STAGES
  // =========================================================
  {
    id: "stage_linux_stage1_foundation",
    type: "stage",
    parentId: "root_linux_learning_path",
    order: 1,
    title: "Linux Stage 1: Foundation (Basics)",
    description:
      "建立 Linux 基本生存能力：終端、文件系統、權限、基本命令、包管理。",
    energy: "medium",
    duration: { min: 10, max: 25 },
    tags: ["linux", "stage", "foundation", "beginner"],
  },
  {
    id: "stage_linux_stage2_shell_productivity",
    type: "stage",
    parentId: "root_linux_learning_path",
    order: 2,
    title: "Linux Stage 2: Shell & Productivity",
    description: "提升效率：管道、重定向、grep/sed/awk、bash 腳本、自動化。",
    energy: "medium",
    duration: { min: 10, max: 25 },
    tags: ["linux", "stage", "shell", "productivity"],
    prerequisites: ["task_linux_stage1_basic_commands_1"],
  },
  {
    id: "stage_linux_stage3_system_management",
    type: "stage",
    parentId: "root_linux_learning_path",
    order: 3,
    title: "Linux Stage 3: System Management",
    description:
      "系統管理：systemd、service、logs、process、resource、storage。",
    energy: "high",
    duration: { min: 15, max: 30 },
    tags: ["linux", "stage", "systemd", "admin"],
    prerequisites: ["task_linux_stage2_pipeline_practice"],
  },
  {
    id: "stage_linux_stage4_networking",
    type: "stage",
    parentId: "root_linux_learning_path",
    order: 4,
    title: "Linux Stage 4: Networking",
    description:
      "網路基礎：IP/DNS、curl、ssh、port、firewall、troubleshooting。",
    energy: "high",
    duration: { min: 15, max: 30 },
    tags: ["linux", "stage", "networking", "ssh"],
    prerequisites: ["task_linux_stage3_systemd_basic"],
  },
  {
    id: "stage_linux_stage5_security_users_permissions",
    type: "stage",
    parentId: "root_linux_learning_path",
    order: 5,
    title: "Linux Stage 5: Users, Permissions & Security",
    description: "用戶、群組、sudo、權限、ACL、安全習慣、基礎 hardening。",
    energy: "high",
    duration: { min: 15, max: 35 },
    tags: ["linux", "stage", "security", "permissions"],
    prerequisites: ["task_linux_stage4_ssh_practice"],
  },
  {
    id: "stage_linux_stage6_practical_projects",
    type: "stage",
    parentId: "root_linux_learning_path",
    order: 6,
    title: "Linux Stage 6: Practical Projects",
    description:
      "把 Linux 學到的東西整合成可交付成果：server、automation、deploy。",
    energy: "high",
    duration: { min: 20, max: 60 },
    tags: ["linux", "stage", "projects", "real-world"],
    prerequisites: ["task_linux_stage5_sudo_and_users"],
  },

  // =========================================================
  // STAGE 1: Foundation (Basics)
  // =========================================================
  {
    id: "task_linux_stage1_setup_linux_env",
    type: "leaf",
    parentId: "stage_linux_stage1_foundation",
    order: 0,
    title: "準備 Linux 學習環境（VM / WSL / Cloud）",
    description:
      "選擇一種方式：Ubuntu VM / WSL / 雲端 VPS。確保你能進入 shell 並正常更新系統。",
    energy: "medium",
    duration: { min: 20, max: 60 },
    tags: ["linux", "setup", "ubuntu", "wsl"],
  },
  {
    id: "task_linux_stage1_terminal_basics",
    type: "leaf",
    parentId: "stage_linux_stage1_foundation",
    order: 1,
    title: "Terminal 基礎：pwd / ls / cd",
    description:
      "練習 pwd、ls、cd。要求：你能快速在 /、~、/etc、/var、/tmp 間切換。",
    energy: "low",
    duration: { min: 10, max: 20 },
    tags: ["linux", "terminal", "basics"],
    prerequisites: ["task_linux_stage1_setup_linux_env"],
  },
  {
    id: "task_linux_stage1_basic_commands_1",
    type: "leaf",
    parentId: "stage_linux_stage1_foundation",
    order: 2,
    title: "基本命令：touch / mkdir / cp / mv / rm",
    description:
      "建立一個 playground 資料夾，練習建立文件、複製、移動、刪除。理解 rm -r 的危險。",
    energy: "medium",
    duration: { min: 20, max: 40 },
    tags: ["linux", "commands", "filesystem"],
    prerequisites: ["task_linux_stage1_terminal_basics"],
  },
  {
    id: "task_linux_stage1_view_files",
    type: "leaf",
    parentId: "stage_linux_stage1_foundation",
    order: 3,
    title: "查看文件：cat / less / head / tail",
    description:
      "建立一個文本檔案，練習用 cat/less/head/tail 查看。用 tail -f 模擬 log 追蹤。",
    energy: "low",
    duration: { min: 15, max: 30 },
    tags: ["linux", "files", "logs", "less"],
    prerequisites: ["task_linux_stage1_basic_commands_1"],
  },
  {
    id: "task_linux_stage1_find_and_locate",
    type: "leaf",
    parentId: "stage_linux_stage1_foundation",
    order: 4,
    title: "搜尋文件：find / locate",
    description:
      "用 find 找到指定副檔名文件；用 locate 查找 bashrc。理解 find vs locate 差異。",
    energy: "medium",
    duration: { min: 20, max: 40 },
    tags: ["linux", "find", "locate", "search"],
    prerequisites: ["task_linux_stage1_view_files"],
  },
  {
    id: "task_linux_stage1_permissions_intro",
    type: "leaf",
    parentId: "stage_linux_stage1_foundation",
    order: 5,
    title: "權限入門：ls -l / chmod / chown",
    description:
      "理解 rwx 與 user/group/others。練習 chmod 644/755，並理解可執行文件的含義。",
    energy: "medium",
    duration: { min: 20, max: 45 },
    tags: ["linux", "permissions", "chmod", "chown"],
    prerequisites: ["task_linux_stage1_find_and_locate"],
  },
  {
    id: "task_linux_stage1_package_manager",
    type: "leaf",
    parentId: "stage_linux_stage1_foundation",
    order: 6,
    title: "包管理：apt update / install / remove",
    description:
      "練習 apt update、apt install tree、apt remove tree。理解 package manager 是什麼。",
    energy: "medium",
    duration: { min: 20, max: 40 },
    tags: ["linux", "apt", "packages"],
    prerequisites: ["task_linux_stage1_permissions_intro"],
  },
  {
    id: "task_linux_stage1_manual_help",
    type: "leaf",
    parentId: "stage_linux_stage1_foundation",
    order: 7,
    title: "學會查文檔：man / --help",
    description: "用 man 查 ls、find、chmod 的用法。學會 / 搜索與 q 退出。",
    energy: "low",
    duration: { min: 15, max: 25 },
    tags: ["linux", "man", "documentation"],
    prerequisites: ["task_linux_stage1_package_manager"],
  },
  {
    id: "task_linux_stage1_mini_checkpoint",
    type: "leaf",
    parentId: "stage_linux_stage1_foundation",
    order: 8,
    title: "Stage 1 Checkpoint：整理一份 Linux Cheat Sheet",
    description:
      "整理一份 cheat sheet：至少 20 條命令 + 一句用途。保存到你的筆記庫。",
    energy: "medium",
    duration: { min: 30, max: 60 },
    tags: ["linux", "checkpoint", "notes"],
    prerequisites: ["task_linux_stage1_manual_help"],
  },

  // =========================================================
  // STAGE 2: Shell & Productivity
  // =========================================================
  {
    id: "task_linux_stage2_redirection_notes",
    type: "leaf",
    parentId: "stage_linux_stage2_shell_productivity",
    order: 0,
    title: "重定向筆記：> >> < 2> &>",
    description: "寫筆記：stdout/stderr 是什麼？> 與 >> 差異？2> 怎麼用？",
    energy: "low",
    duration: { min: 15, max: 30 },
    tags: ["linux", "shell", "redirection", "notes"],
    prerequisites: ["task_linux_stage1_mini_checkpoint"],
  },
  {
    id: "task_linux_stage2_pipeline_practice",
    type: "leaf",
    parentId: "stage_linux_stage2_shell_productivity",
    order: 1,
    title: "管道練習：| + grep + sort + wc",
    description:
      "用 ps aux | grep ... | wc -l 做查詢。用 sort 排序。目標：熟悉管道思維。",
    energy: "medium",
    duration: { min: 20, max: 40 },
    tags: ["linux", "pipeline", "grep", "sort", "wc"],
    prerequisites: ["task_linux_stage2_redirection_notes"],
  },
  {
    id: "task_linux_stage2_grep_find_text",
    type: "leaf",
    parentId: "stage_linux_stage2_shell_productivity",
    order: 2,
    title: "grep：搜尋文本（含 -r -n -i）",
    description:
      "建立一個資料夾含多個 txt，練習 grep -r 搜索關鍵詞，並顯示行號。",
    energy: "medium",
    duration: { min: 20, max: 45 },
    tags: ["linux", "grep", "text-search"],
    prerequisites: ["task_linux_stage2_pipeline_practice"],
  },
  {
    id: "task_linux_stage2_sed_intro",
    type: "leaf",
    parentId: "stage_linux_stage2_shell_productivity",
    order: 3,
    title: "sed：批量替換入門",
    description:
      "用 sed 做簡單替換：把 hello 替換成 hi。理解 sed 's/a/b/' 的模式。",
    energy: "medium",
    duration: { min: 20, max: 45 },
    tags: ["linux", "sed", "text-processing"],
    prerequisites: ["task_linux_stage2_grep_find_text"],
  },
  {
    id: "task_linux_stage2_awk_intro",
    type: "leaf",
    parentId: "stage_linux_stage2_shell_productivity",
    order: 4,
    title: "awk：抽取欄位入門",
    description:
      "用 ls -l 或 ps aux 的輸出練習 awk '{print $1,$2}'，理解欄位概念。",
    energy: "high",
    duration: { min: 20, max: 50 },
    tags: ["linux", "awk", "text-processing"],
    prerequisites: ["task_linux_stage2_sed_intro"],
  },
  {
    id: "task_linux_stage2_bash_script_hello",
    type: "leaf",
    parentId: "stage_linux_stage2_shell_productivity",
    order: 5,
    title: "寫第一個 bash script（hello.sh）",
    description: "寫 hello.sh：輸出日期、當前路徑、用戶名。chmod +x 後可執行。",
    energy: "medium",
    duration: { min: 20, max: 40 },
    tags: ["linux", "bash", "script"],
    prerequisites: ["task_linux_stage2_awk_intro"],
  },
  {
    id: "task_linux_stage2_bash_vars_if_loop",
    type: "leaf",
    parentId: "stage_linux_stage2_shell_productivity",
    order: 6,
    title: "bash：變量 + if + loop 小練習",
    description:
      "寫 script：輸入一個數字，判斷大小；for loop 打印 1~10；while loop 倒數。",
    energy: "high",
    duration: { min: 30, max: 70 },
    tags: ["linux", "bash", "script", "loops"],
    prerequisites: ["task_linux_stage2_bash_script_hello"],
  },
  {
    id: "task_linux_stage2_checkpoint_log_parser",
    type: "leaf",
    parentId: "stage_linux_stage2_shell_productivity",
    order: 7,
    title: "Stage 2 Checkpoint：做一個 log parser",
    description:
      "寫一個腳本：從 log.txt 中提取 ERROR 行，統計次數，輸出到 report.txt。",
    energy: "high",
    duration: { min: 40, max: 120 },
    tags: ["linux", "bash", "checkpoint", "log"],
    prerequisites: ["task_linux_stage2_bash_vars_if_loop"],
  },

  // =========================================================
  // STAGE 3: System Management
  // =========================================================
  {
    id: "task_linux_stage3_process_basics",
    type: "leaf",
    parentId: "stage_linux_stage3_system_management",
    order: 0,
    title: "進程管理：ps / top / kill",
    description: "練習 ps aux、top、kill PID。理解 SIGTERM vs SIGKILL。",
    energy: "medium",
    duration: { min: 20, max: 45 },
    tags: ["linux", "process", "ps", "top", "kill"],
    prerequisites: ["task_linux_stage2_checkpoint_log_parser"],
  },
  {
    id: "task_linux_stage3_systemd_basic",
    type: "leaf",
    parentId: "stage_linux_stage3_system_management",
    order: 1,
    title: "systemd：systemctl start/stop/status",
    description:
      "練習 systemctl status ssh/nginx（若未安裝可安裝）。理解 service 的概念。",
    energy: "high",
    duration: { min: 30, max: 70 },
    tags: ["linux", "systemd", "systemctl", "services"],
    prerequisites: ["task_linux_stage3_process_basics"],
  },
  {
    id: "task_linux_stage3_logs_journalctl",
    type: "leaf",
    parentId: "stage_linux_stage3_system_management",
    order: 2,
    title: "日誌系統：journalctl",
    description: "練習 journalctl -xe、journalctl -u <service>。學會追蹤錯誤。",
    energy: "medium",
    duration: { min: 20, max: 45 },
    tags: ["linux", "logs", "journalctl", "debugging"],
    prerequisites: ["task_linux_stage3_systemd_basic"],
  },
  {
    id: "task_linux_stage3_disk_usage",
    type: "leaf",
    parentId: "stage_linux_stage3_system_management",
    order: 3,
    title: "磁碟管理：df / du",
    description: "練習 df -h 查看磁碟；用 du -sh 找出佔空間最大的資料夾。",
    energy: "medium",
    duration: { min: 20, max: 40 },
    tags: ["linux", "storage", "disk", "df", "du"],
    prerequisites: ["task_linux_stage3_logs_journalctl"],
  },
  {
    id: "task_linux_stage3_tar_backup",
    type: "leaf",
    parentId: "stage_linux_stage3_system_management",
    order: 4,
    title: "備份壓縮：tar.gz",
    description:
      "練習 tar -czf backup.tar.gz folder/ 與 tar -xzf 解壓。理解備份思維。",
    energy: "medium",
    duration: { min: 20, max: 45 },
    tags: ["linux", "tar", "backup", "compression"],
    prerequisites: ["task_linux_stage3_disk_usage"],
  },
  {
    id: "task_linux_stage3_cron_intro",
    type: "leaf",
    parentId: "stage_linux_stage3_system_management",
    order: 5,
    title: "定時任務：crontab 入門",
    description:
      "建立一個 cron job：每分鐘輸出日期到某個 log file。理解 cron 表達式。",
    energy: "high",
    duration: { min: 30, max: 80 },
    tags: ["linux", "cron", "automation"],
    prerequisites: ["task_linux_stage3_tar_backup"],
  },
  {
    id: "task_linux_stage3_checkpoint_system_health_script",
    type: "leaf",
    parentId: "stage_linux_stage3_system_management",
    order: 6,
    title: "Stage 3 Checkpoint：寫一個系統健康檢查腳本",
    description:
      "寫一個 healthcheck.sh：輸出 CPU/memory/disk usage，並保存成 report。",
    energy: "high",
    duration: { min: 45, max: 120 },
    tags: ["linux", "checkpoint", "script", "system"],
    prerequisites: ["task_linux_stage3_cron_intro"],
  },

  // =========================================================
  // STAGE 4: Networking
  // =========================================================
  {
    id: "task_linux_stage4_network_notes",
    type: "leaf",
    parentId: "stage_linux_stage4_networking",
    order: 0,
    title: "網路筆記：IP / DNS / Port / HTTP",
    description:
      "寫筆記：IP 是什麼？DNS 做什麼？port 是什麼？HTTP request/response 基本概念。",
    energy: "medium",
    duration: { min: 20, max: 45 },
    tags: ["linux", "networking", "notes"],
    prerequisites: ["task_linux_stage3_checkpoint_system_health_script"],
  },
  {
    id: "task_linux_stage4_ping_traceroute",
    type: "leaf",
    parentId: "stage_linux_stage4_networking",
    order: 1,
    title: "網路排錯：ping / traceroute",
    description:
      "練習 ping google.com；用 traceroute 查看路由。理解延遲與 hops。",
    energy: "medium",
    duration: { min: 20, max: 40 },
    tags: ["linux", "ping", "traceroute", "networking"],
    prerequisites: ["task_linux_stage4_network_notes"],
  },
  {
    id: "task_linux_stage4_curl_wget",
    type: "leaf",
    parentId: "stage_linux_stage4_networking",
    order: 2,
    title: "curl / wget：下載與測試 API",
    description: "用 curl 訪問一個網站並查看 headers；用 wget 下載一個文件。",
    energy: "medium",
    duration: { min: 20, max: 45 },
    tags: ["linux", "curl", "wget", "http"],
    prerequisites: ["task_linux_stage4_ping_traceroute"],
  },
  {
    id: "task_linux_stage4_ports_netstat_ss",
    type: "leaf",
    parentId: "stage_linux_stage4_networking",
    order: 3,
    title: "端口監控：ss / netstat",
    description: "練習 ss -tulpn 找出正在監聽的 port。理解 LISTEN 狀態。",
    energy: "high",
    duration: { min: 25, max: 60 },
    tags: ["linux", "ss", "netstat", "ports"],
    prerequisites: ["task_linux_stage4_curl_wget"],
  },
  {
    id: "task_linux_stage4_ssh_practice",
    type: "leaf",
    parentId: "stage_linux_stage4_networking",
    order: 4,
    title: "SSH 實戰：ssh + scp",
    description:
      "用 ssh 登入另一台機器（可用本機 VM）；用 scp 傳輸文件。理解 key-based login。",
    energy: "high",
    duration: { min: 40, max: 120 },
    tags: ["linux", "ssh", "scp", "remote"],
    prerequisites: ["task_linux_stage4_ports_netstat_ss"],
  },
  {
    id: "task_linux_stage4_firewall_intro",
    type: "leaf",
    parentId: "stage_linux_stage4_networking",
    order: 5,
    title: "防火牆：ufw 入門",
    description:
      "練習 ufw status、允許 ssh、拒絕某 port。理解防火牆的核心邏輯。",
    energy: "high",
    duration: { min: 30, max: 90 },
    tags: ["linux", "firewall", "ufw", "security"],
    prerequisites: ["task_linux_stage4_ssh_practice"],
  },
  {
    id: "task_linux_stage4_checkpoint_network_report",
    type: "leaf",
    parentId: "stage_linux_stage4_networking",
    order: 6,
    title: "Stage 4 Checkpoint：寫一份網路排錯流程",
    description:
      "寫一份 troubleshooting checklist：DNS 不通、ping 不通、port 不通時如何排查。",
    energy: "medium",
    duration: { min: 30, max: 70 },
    tags: ["linux", "checkpoint", "networking", "notes"],
    prerequisites: ["task_linux_stage4_firewall_intro"],
  },

  // =========================================================
  // STAGE 5: Users, Permissions & Security
  // =========================================================
  {
    id: "task_linux_stage5_users_groups_notes",
    type: "leaf",
    parentId: "stage_linux_stage5_security_users_permissions",
    order: 0,
    title: "用戶與群組：useradd / groupadd / id",
    description:
      "建立一個新用戶 testuser，建立一個 group，練習 id、groups、whoami。",
    energy: "high",
    duration: { min: 30, max: 90 },
    tags: ["linux", "users", "groups", "security"],
    prerequisites: ["task_linux_stage4_checkpoint_network_report"],
  },
  {
    id: "task_linux_stage5_sudo_and_users",
    type: "leaf",
    parentId: "stage_linux_stage5_security_users_permissions",
    order: 1,
    title: "sudo 與權限分配：visudo",
    description:
      "理解 sudoers，學會用 visudo 給某用戶 sudo 權限（可限制命令）。",
    energy: "high",
    duration: { min: 30, max: 90 },
    tags: ["linux", "sudo", "visudo", "security"],
    prerequisites: ["task_linux_stage5_users_groups_notes"],
  },
  {
    id: "task_linux_stage5_acl_intro",
    type: "leaf",
    parentId: "stage_linux_stage5_security_users_permissions",
    order: 2,
    title: "ACL 權限：setfacl / getfacl",
    description:
      "練習 ACL：給某個 user 對某個 file 額外讀寫權限。理解 ACL vs chmod。",
    energy: "high",
    duration: { min: 30, max: 80 },
    tags: ["linux", "acl", "permissions"],
    prerequisites: ["task_linux_stage5_sudo_and_users"],
  },
  {
    id: "task_linux_stage5_security_habits",
    type: "leaf",
    parentId: "stage_linux_stage5_security_users_permissions",
    order: 3,
    title: "安全習慣：更新、最小權限、log 意識",
    description:
      "寫一份安全 checklist：update 頻率、ssh key、禁止 root 登入、備份策略。",
    energy: "medium",
    duration: { min: 20, max: 60 },
    tags: ["linux", "security", "best-practice", "notes"],
    prerequisites: ["task_linux_stage5_acl_intro"],
  },
  {
    id: "task_linux_stage5_checkpoint_hardening_plan",
    type: "leaf",
    parentId: "stage_linux_stage5_security_users_permissions",
    order: 4,
    title: "Stage 5 Checkpoint：寫一份 Linux Server Hardening 計劃",
    description:
      "寫一份 hardening plan：ssh、防火牆、用戶策略、更新策略、日誌監控。",
    energy: "high",
    duration: { min: 40, max: 120 },
    tags: ["linux", "checkpoint", "security", "hardening"],
    prerequisites: ["task_linux_stage5_security_habits"],
  },

  // =========================================================
  // STAGE 6: Practical Projects
  // =========================================================
  {
    id: "task_linux_stage6_project_ssh_server",
    type: "leaf",
    parentId: "stage_linux_stage6_practical_projects",
    order: 0,
    title: "Project：搭建一台可用 SSH 的 Linux Server",
    description:
      "搭建 VM 或 VPS，配置 ssh key login + firewall，確保可以遠程登入。",
    energy: "high",
    duration: { min: 60, max: 180 },
    tags: ["linux", "project", "ssh", "server"],
    prerequisites: ["task_linux_stage5_checkpoint_hardening_plan"],
  },
  {
    id: "task_linux_stage6_project_deploy_static_site",
    type: "leaf",
    parentId: "stage_linux_stage6_practical_projects",
    order: 1,
    title: "Project：部署靜態網站（nginx）",
    description:
      "安裝 nginx，部署一個靜態頁面，並能在瀏覽器訪問（本地或雲端）。",
    energy: "high",
    duration: { min: 60, max: 180 },
    tags: ["linux", "project", "nginx", "deploy"],
    prerequisites: ["task_linux_stage6_project_ssh_server"],
  },
  {
    id: "task_linux_stage6_project_backup_script",
    type: "leaf",
    parentId: "stage_linux_stage6_practical_projects",
    order: 2,
    title: "Project：自動備份腳本 + cron",
    description:
      "寫 backup.sh：打包某資料夾並存到 backups/，用 cron 每天自動跑一次。",
    energy: "high",
    duration: { min: 45, max: 150 },
    tags: ["linux", "project", "backup", "cron"],
    prerequisites: ["task_linux_stage6_project_deploy_static_site"],
  },
  {
    id: "task_linux_stage6_project_log_monitor",
    type: "leaf",
    parentId: "stage_linux_stage6_practical_projects",
    order: 3,
    title: "Project：log 監控（grep + report）",
    description:
      "寫腳本每天掃描 auth.log 或 nginx log，提取異常訪問，輸出 report。",
    energy: "high",
    duration: { min: 45, max: 150 },
    tags: ["linux", "project", "logs", "monitoring"],
    prerequisites: ["task_linux_stage6_project_backup_script"],
  },
  {
    id: "task_linux_stage6_checkpoint_lfcs_ready",
    type: "leaf",
    parentId: "stage_linux_stage6_practical_projects",
    order: 4,
    title: "Final Checkpoint：達到 LFCS/RHCSA 級別能力清單",
    description:
      "寫一份清單：你已經掌握哪些技能？哪些技能還缺？對照 LFCS/RHCSA 考綱自評。",
    energy: "medium",
    duration: { min: 30, max: 90 },
    tags: ["linux", "checkpoint", "lfcs", "rhcsa", "review"],
    prerequisites: ["task_linux_stage6_project_log_monitor"],
  },
];
